<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-test">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Assertions - zend-test</title>

    <link rel="stylesheet" href="../css/styles-18b942728f.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"></script>
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="">zend-test</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            
                
                    <li class="subnavigation__list-item ">
                        <a href="intro/" class="subnavigation__link">Introduction</a>
                    </li>
                
            
                
                    <li class="subnavigation__list-item ">
                        <a href="phpunit/" class="subnavigation__link">Unit testing with PHPUnit</a>
                    </li>
                
            
                
                    <li class="subnavigation__list-item subnavigation__list-item--active">
                        <a href="assertions/" class="subnavigation__link">Assertions</a>
                    </li>
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-test</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-test/" class="header__link header__link--github" title="Go to repository of zend-test">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="">zend-test</a></li>

            

            <li class="active">Assertions</li>
        
    
</ol>


    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#request-assertions" class="toc__link">Request Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#css-selector-assertions" class="toc__link">CSS Selector Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#xpath-assertions" class="toc__link">XPath Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#redirect-assertions" class="toc__link">Redirect Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#response-header-assertions" class="toc__link">Response Header Assertions</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#other-assertions" class="toc__link">Other Assertions</a>
                    </li>
                
            </ul>
        </div>
    


    <h1 id="assertions">Assertions</h1>
<p>Assertions are at the heart of unit testing; you use them to verify that the
results are what you expect. To this end, <code>Zend\Test\PHPUnit\AbstractControllerTestCase</code>
provides a number of assertions to make testing your MVC apps and controllers
simpler.</p>
<h2 id="request-assertions">Request Assertions</h2>
<p>It's often useful to assert against the last run action, controller, and module;
additionally, you may want to assert against the route that was matched. The
following assertions can help you in this regard:</p>
<ul>
<li><code>assertModulesLoaded(array $modules)</code>: Assert that the given modules were
  loaded by the application.</li>
<li><code>assertModuleName($module)</code>: Assert that the given module was used in the last
  dispatched action.</li>
<li><code>assertControllerName($controller)</code>: Assert that the given controller
  identifier was selected in the last dispatched action.</li>
<li><code>assertControllerClass($controller)</code>: Assert that the given controller class
  was selected in the last dispatched action.</li>
<li><code>assertActionName($action)</code>: Assert that the given action was last dispatched.</li>
<li><code>assertMatchedRouteName($route)</code>: Assert that the given named route was
  matched by the router.</li>
</ul>
<p>Each also has a 'Not' variant for negative assertions.</p>
<h2 id="css-selector-assertions">CSS Selector Assertions</h2>
<p>CSS selectors are an easy way to verify that certain artifacts are present in
the response content.  They also make it trivial to ensure that items necessary
for JavaScript UIs and/or AJAX integration will be present; most JS toolkits
provide some mechanism for manipulating DOM elements based on CSS selectors, so
the syntax would be the same.</p>
<p>This functionality is provided via <a href="https://docs.zendframework.com/zend-dom/query/">Zend\Dom\Query</a>,
and integrated into a set of 'Query' assertions. Each of these assertions takes
as their first argument a CSS selector, with optionally additional arguments
and/or an error message, based on the assertion type. You can find the rules for
writing the CSS selectors in the zend-dom <a href="https://docs.zendframework.com/zend-dom/query/#theory-of-operation">Theory of Operation</a>
chapter. Query assertions include:</p>
<ul>
<li><code>assertQuery($path)</code>: assert that one or more DOM elements matching the given
  CSS selector are present.</li>
<li><code>assertQueryContentContains($path, $match)</code>: assert that one or more DOM
  elements matching the given CSS selector are present, and that at least one
  contains the content provided in <code>$match</code>.</li>
<li><code>assertQueryContentRegex($path, $pattern)</code>: assert that one or more DOM
  elements matching the given CSS selector are present, and that at least one
  matches the regular expression provided in <code>$pattern</code>.</li>
<li><code>assertQueryCount($path, $count)</code>: assert that there are exactly <code>$count</code> DOM
  elements matching the given CSS selector present.</li>
<li><code>assertQueryCountMin($path, $count)</code>: assert that there are at least <code>$count</code>
  DOM elements matching the given CSS selector present.</li>
<li><code>assertQueryCountMax($path, $count)</code>: assert that there are no more than
  <code>$count</code> DOM elements matching the given CSS selector present.</li>
</ul>
<p>All queries above also allow an optional <code>$message</code> argument; when provided,
that message will be used when displaying assertion failures.</p>
<p>Additionally, each of the above has a 'Not' variant that provides a negative
assertion: <code>assertNotQuery()</code>, <code>assertNotQueryContentContains()</code>,
<code>assertNotQueryContentRegex()</code>, and <code>assertNotQueryCount()</code>. (Note that the min
and max counts do not have these variants, for what should be obvious reasons.)</p>
<h2 id="xpath-assertions">XPath Assertions</h2>
<p>Some developers are more familiar with XPath than with CSS selectors, and thus
XPath variants of all the Query assertions are also provided. These are:</p>
<ul>
<li><code>assertXpathQuery($path)</code>: assert against the given XPath selection</li>
<li><code>assertNotXpathQuery($path)</code>: assert against the given XPath selection;
  negative assertions</li>
<li><code>assertXpathQueryCount($path, $count)</code>: assert against XPath selection; should
  contain exact number of nodes</li>
<li><code>assertNotXpathQueryCount($path, $count)</code>: assert against DOM/XPath selection;
  should not contain exact number of nodes</li>
<li><code>assertXpathQueryCountMin($path, $count)</code>: assert against XPath selection;
  should contain at least this number of nodes</li>
<li><code>assertXpathQueryCountMax($path, $count)</code>: assert against XPath selection;
  should contain no more than this number of nodes</li>
<li><code>assertXpathQueryContentContains($path, $match)</code>: assert against XPath
  selection; node should contain content</li>
<li><code>assertNotXpathQueryContentContains($path, $match)</code>: assert against XPath
 selection; node should not contain content</li>
<li><code>assertXpathQueryContentRegex($path, $pattern)</code>: assert against XPath
  selection; node should match content</li>
<li><code>assertNotXpathQueryContentRegex($path, $pattern)</code>: assert against XPath
  selection; node should not match content</li>
</ul>
<h2 id="redirect-assertions">Redirect Assertions</h2>
<p>Often an action will redirect. Instead of following the redirect,
<code>Zend\Test\PHPUnit\ControllerTestCase</code> allows you to test for redirects with a
handful of assertions.</p>
<ul>
<li><code>assertRedirect()</code>: assert simply that a redirect has occurred.</li>
<li><code>assertRedirectTo($url)</code>: assert that a redirect has occurred, and that the
  value of the <code>Location</code> header is the <code>$url</code> provided.</li>
<li><code>assertRedirectRegex($pattern)</code>: assert that a redirect has occurred, and that
  the value of the <code>Location</code> header matches the regular expression provided by
  <code>$pattern</code>.</li>
</ul>
<p>Each also has a 'Not' variant for negative assertions.</p>
<h2 id="response-header-assertions">Response Header Assertions</h2>
<p>In addition to checking for redirect headers, you will often need to check for specific HTTP
response codes and headers; for instance, to determine whether an action results in a 404 or 500
response, or to ensure that JSON responses contain the appropriate <code>Content-Type</code> header. The
following assertions are available.</p>
<ul>
<li><code>assertResponseStatusCode($code)</code>: assert that the response resulted in the
  given HTTP response code.</li>
<li><code>assertResponseHeader($header)</code>: assert that the response contains the given
  header.</li>
<li><code>assertResponseHeaderContains($header, $match)</code>: assert that the response
  contains the given header and that its content contains the given string.</li>
<li><code>assertResponseHeaderRegex($header, $pattern)</code>: assert that the response
  contains the given header and that its content matches the given regex.</li>
<li><code>assertHasResponseHeader($header)</code>: assert that the response header exists.</li>
</ul>
<p>Additionally, each of the above assertions have a 'Not' variant for negative assertions.</p>
<ul>
<li><code>assertResponseReasonPhrase($phrase)</code>: assert the the response has the given
  reason phrase</li>
</ul>
<h2 id="other-assertions">Other Assertions</h2>
<h3 id="application-exceptions">Application Exceptions</h3>
<ul>
<li><code>assertApplicationException($type, $message = null)</code>: assert the given
  application exception type and message.</li>
</ul>
<h3 id="template-name">Template name</h3>
<ul>
<li><code>assertTemplateName($templateName)</code>: assert that a template was used somewhere
  in the view model tree.</li>
<li><code>assertNotTemplateName($templateName)</code>: assert that a template was not used
  somewhere in the view model tree.</li>
</ul>



    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="phpunit/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>



    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-test/edit/master/docs/book/assertions.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="">zend-test</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            
                
                    <li class="subnavigation__list-item ">
                        <a href="intro/" class="subnavigation__link">Introduction</a>
                    </li>
                
            
                
                    <li class="subnavigation__list-item ">
                        <a href="phpunit/" class="subnavigation__link">Unit testing with PHPUnit</a>
                    </li>
                
            
                
                    <li class="subnavigation__list-item subnavigation__list-item--active">
                        <a href="assertions/" class="subnavigation__link">Assertions</a>
                    </li>
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2018 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '..',
            siteName = 'zend-test';
    </script>
    <script src="../js/scripts-edc4cfa790.js"></script>
        <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

<script>
// Anchors
anchors.options.placement = 'left';
anchors.add(
    '.content h1:not(.content__title), .content h2, .content > h3, .content h4, .content h5'
);
</script>



</body>


</html>
